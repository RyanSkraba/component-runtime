<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Built-in services :: Talend Component Kit Developer Reference Guide</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.0.4/services-built-in.html">
    <meta name="generator" content="Antora 1.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta name="date" content="2018-07-25T08:43:39.586Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch.min.css" integrity="sha256-vusmcqkVvKdkwoueSJZLlO9y2P+Lp9fN3WwQUV9Uwfw=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch-theme-algolia.min.css" integrity="sha256-ZqsS4QagZnfArbOyheCO4qVjzzsMbg/WMvf5tLtId/Q=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','GTM-PSBN')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
    <nav class="navbar">
        <div class="navbar-brand">
            <div class="navbar-item">
                <a href="https://talend.github.io/component-runtime">Talend Component Kit</a>
                <span class="separator">//</span>
                <a href="https://talend.github.io/component-runtime">Docs</a>
            </div>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <div class="global-search">
                    <form role="search" action="search.html">
                        <div>
                            <input class="rounded" type="text" placeholder="Search" name="query" id="searchInput">
                            <input type="hidden" name="idx" value="githubantora">
                        </div>
                    </form>
                </div>
                <div class="navbar-item has-dropdown is-hoverable">
                    <div class="navbar-link">Projects</div>
                    <div class="navbar-dropdown">
                        <div class="navbar-item"><strong>API</strong></div>
                        <a class="navbar-item" href="https://github.com/talend/component-api">Repository</a>
                        <hr class="navbar-divider">
                        <div class="navbar-item"><strong>Runtime</strong></div>
                        <a class="navbar-item" href="https://github.com/talend/component-runtime">Repository</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="main" data-version="1.0.4">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Talend Component Kit Developer Reference Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-getting-started-with-tck.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="what-is-a-talend-component.html">What is a Talend Component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="methodology-creating-components.html">Methodology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tck-framework-overview.html">Framework Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-setup-environment.html">Setting up your environment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="system-prerequisites.html">System requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-talend-intellij-plugin-usage.html">IntelliJ plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-generating-project.html">Generating a project</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-generate-project-using-starter.html">Using the starter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="generate-project-using-intellij-plugin.html">Using the IntelliJ plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-creating-components.html">Creating components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="component-definition.html">Defining a component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="component-configuration.html">Configuring a component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="component-registering.html">Registering a component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="component-internationalization.html">Internationalizing a component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="component-loading.html">Loading a component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-configuration-sensitive-data.html">Masking sensitive data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices.html">Best practices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#">mapsub-build-tools.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="wrapping-a-beam-io.html">Wrapping a Beam I/O</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-defining-services.html">Defining services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services-internationalization.html">Internationalizing a service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services-actions.html">Providing actions through a service</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="services-built-in.html">Built-in services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services-interceptors.html">Services and interceptors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services-custom-api.html">Defining a custom API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-testing-components.html">Testing components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing-best-practices.html">Component testing best practices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index-sub-testing-runtime.html">Testing component runtime</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing-beam.html">Beam testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing-multiple-envs.html">Testing in multiple environments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing-maven-passwords.html">Reusing Maven credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing-generating-data.html">Generating data for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-deploying-components.html">Deploying components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="studio.html">Deploying to Talend Studio</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-tutorials.html">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-generate-project-using-starter.html">Generating a project from the starter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-create-an-input-component.html">Creating a Hazelcast input component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-create-an-output-component.html">Creating a Hazelcast output component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-create-components-rest-api.html">Creating a Zendesk REST API connector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-test-rest-api.html">Testing a Zendesk REST API connector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-test-your-components.html">Testing a Hazelcast component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tutorial-dev-vs-ci-setup.html">Testing in a continuous integration environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index-reference-guide.html">Reference Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gallery.html">Widget and validation gallery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-actions.html">Actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-conditions.html">Conditions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-configuration-types.html">Configuration types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-constraints.html">Constraints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-junit-environments.html">Junit environments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-proxy-server-api.html">Proxy server API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-proxy-server-configuration.html">Proxy server configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-rest-resources.html">Component Runtime REST resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-scanning-exclusions.html">Scanning exclusions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-server-configuration.html">Server configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-ui.html">UI API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="apidocs.html">Javadocs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index-knowledge-base.html">Knowledge base</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="changelog.html">Changelog</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Talend Component Kit Developer Reference Guide</span>
    <span class="version">1.0.4</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Talend Component Kit Developer Reference Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0.4</a>
        </li>
        <li class="version">
          <a href="../1.0.3/index.html">1.0.3</a>
        </li>
        <li class="version">
          <a href="../1.0.2/index.html">1.0.2</a>
        </li>
        <li class="version">
          <a href="../1.0.1/index.html">1.0.1</a>
        </li>
        <li class="version">
          <a href="../1.0.0/index.html">1.0.0</a>
        </li>
        <li class="version">
          <a href="../0.0.12/index.html">0.0.12</a>
        </li>
        <li class="version">
          <a href="../0.0.11/index.html">0.0.11</a>
        </li>
        <li class="version">
          <a href="../0.0.10/index.html">0.0.10</a>
        </li>
        <li class="version">
          <a href="../0.0.9/index.html">0.0.9</a>
        </li>
        <li class="version">
          <a href="../0.0.8/index.html">0.0.8</a>
        </li>
        <li class="version">
          <a href="../0.0.7/index.html">0.0.7</a>
        </li>
        <li class="version">
          <a href="../0.0.6/index.html">0.0.6</a>
        </li>
        <li class="version">
          <a href="../0.0.5/index.html">0.0.5</a>
        </li>
        <li class="version">
          <a href="../0.0.4/index.html">0.0.4</a>
        </li>
        <li class="version">
          <a href="../0.0.3/index.html">0.0.3</a>
        </li>
        <li class="version">
          <a href="../0.0.2/index.html">0.0.2</a>
        </li>
        <li class="version">
          <a href="../0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
    <button class="navigation-toggle"></button>
    <nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Talend Component Kit Developer Reference Guide</a></li>
    <li class="crumb"><a href="index-defining-services.html">Defining services</a></li>
    <li class="crumb"><a href="services-built-in.html">Built-in services</a></li>
  </ul>
</nav>
    <div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">1.0.4</button>
  <div class="versions-menu">
    <a class="version is-current" href="services-built-in.html">1.0.4</a>
    <a class="version" href="../1.0.3/services-built-in.html">1.0.3</a>
    <a class="version" href="../1.0.2/services-built-in.html">1.0.2</a>
    <a class="version" href="../1.0.1/services-built-in.html">1.0.1</a>
    <a class="version" href="../1.0.0/services-built-in.html">1.0.0</a>
    <a class="version" href="../0.0.12/services-built-in.html">0.0.12</a>
    <a class="version" href="../0.0.11/services-built-in.html">0.0.11</a>
    <a class="version" href="../0.0.10/services-built-in.html">0.0.10</a>
    <a class="version" href="../0.0.9/services-built-in.html">0.0.9</a>
    <a class="version" href="../0.0.8/services-built-in.html">0.0.8</a>
    <a class="version" href="../0.0.7/services-built-in.html">0.0.7</a>
    <a class="version" href="../0.0.6/services-built-in.html">0.0.6</a>
    <a class="version" href="../0.0.5/services-built-in.html">0.0.5</a>
    <a class="version" href="../0.0.4/services-built-in.html">0.0.4</a>
    <a class="version" href="../0.0.3/services-built-in.html">0.0.3</a>
    <a class="version" href="../0.0.2/services-built-in.html">0.0.2</a>
    <a class="version" href="../0.0.1/services-built-in.html">0.0.1</a>
  </div>
</div>
</div>
<article class="doc">
        <h1>Built-in services</h1>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The framework provides built-in services that you can inject by type in components and actions.</p>
</div>
<div class="paragraph">
<p>Here is the list:</p>
</div>
<table class="tableblock frame-all grid-all table-striped table-hover table-ordered">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.talend.sdk.component.api.service.cache.LocalCache</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a small abstraction to cache data that does not need to be recomputed very often. Commonly used by actions for UI interactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.talend.sdk.component.api.service.dependency.Resolver</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Allows to resolve a dependency from its Maven coordinates.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.bind.Jsonb</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-B instance. If your model is static and you don&#8217;t want to handle the serialization manually using JSON-P, you can inject that instance.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.spi.JsonProvider</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-P instance. Prefer other JSON-P instances if you don&#8217;t exactly know why you use this one.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.JsonBuilderFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-P instance. It is recommended to use this one instead of a custom one to optimize memory usage and speed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.JsonWriterFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-P instance. It is recommended to use this one instead of a custom one to optimize memory usage and speed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.JsonReaderFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-P instance. It is recommended to use this one instead of a custom one to optimize memory usage and speed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.stream.JsonParserFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-P instance. It is recommended to use this one instead of a custom one to optimize memory usage and speed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>javax.json.stream.JsonGeneratorFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JSON-P instance. It is recommended to use this one instead of a custom one to optimize memory usage and speed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.talend.sdk.component.api.service.configuration.LocalConfiguration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Represents the local configuration that can be used during the design.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.talend.sdk.component.api.service.dependency.Resolver</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Allows to resolve files from Maven coordinates (like <code>dependencies.txt</code> for component). Note that it assumes that the files are available in the component Maven repository.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.talend.sdk.component.api.service.injector.Injector</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Utility to inject services in fields marked with <code>@Service</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>org.talend.sdk.component.api.service.factory.ObjectFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Allows to instantiate an object from its class name and properties.</p>
</div>
<div class="paragraph">
<p>It is not recommended to use it for the runtime because the local configuration is usually different and the instances are distinct.</p>
</div>
<div class="paragraph">
<p>You can also use the local cache as an interceptor with <code>@Cached</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Every interface that extends <code>HttpClient</code> and that contains methods annotated with <code>@Request</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Lets you define an HTTP client in a declarative manner using an annotated interface.</p>
</div>
<div class="paragraph">
<p>See the <a href="#httpclient_usage">Using HttpClient</a> for more details.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All these <strong>injected</strong> services are serializable, which is important for big data environments. If you create the instances yourself, you cannot benefit from these features, nor from the memory optimization done by the runtime. Prefer reusing the framework instances over custom ones.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="httpclient_usage"><a class="anchor" href="#httpclient_usage"></a>Using HttpClient</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The HttpClient usage is described in this section by using the REST API example below. It is assume that it requires a basic authentication header.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET     <code>/api/records/{id}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST    <code>/api/records</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON payload to be created: <code>{"id":"some id", "data":"some data"}</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To create an HTTP client that is able to consume the REST API above, you need to define an interface that extends <code>HttpClient</code>.</p>
</div>
<div class="paragraph">
<p>The <code>HttpClient</code> interface lets you set the <code>base</code> for the HTTP address that the client will hit.</p>
</div>
<div class="paragraph">
<p>The <code>base</code> is the part of the address that needs to be added to the request path to hit the API.</p>
</div>
<div class="paragraph">
<p>Every method annotated with <code>@Request</code> in the interface defines an HTTP request.
Every request can have a <code>@Codec</code> parameter that allows to encode or decode the request/response payloads.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can ignore the encoding/decoding for <code>String</code> and <code>Void</code> payloads.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface APIClient extends HttpClient {
    @Request(path = "api/records/{id}", method = "GET")
    @Codec(decoder = RecordDecoder.class) //decoder =  decode returned data to Record class
    Record getRecord(@Header("Authorization") String basicAuth, @Path("id") int id);

    @Request(path = "api/records", method = "POST")
    @Codec(encoder = RecordEncoder.class, decoder = RecordDecoder.class) //encoder = encode record to fit request format (json in this example)
    Record createRecord(@Header("Authorization") String basicAuth, Record record);
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The interface should extend <code>HttpClient</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the codec classes (that implement Encoder/Decoder), you can inject any of your service annotated with <code>@Service</code> or <code>@Internationalized</code> into the constructor.
Internationalization services can be useful to have internationalized messages for errors handling.</p>
</div>
<div class="paragraph">
<p>The interface can be injected into component classes or services to consume the defined API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class MyService {

    private APIClient client;

    public MyService(...,APIClient client){
        //...
        this.client = client;
        client.base("http://localhost:8080");// init the base of the api, ofen in a PostConstruct or init method
    }

    //...
    // Our get request
    Record rec =  client.getRecord("Basic MLFKG?VKFJ", 100);

    //...
    // Our post request
    Record newRecord = client.createRecord("Basic MLFKG?VKFJ", new Record());
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, <code><strong>/</strong>+json</code> are mapped to JSON-P and <code><strong>/</strong>+xml</code> to JAX-B if the model has a <code>@XmlRootElement</code> annotation.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_customizing_http_client_requests"><a class="anchor" href="#_customizing_http_client_requests"></a>Customizing HTTP client requests</h3>
<div class="paragraph">
<p>For advanced cases, you can customize the <code>Connection</code> by directly using <code>@UseConfigurer</code> on the method. It calls your custom instance of <code>Configurer</code>. Note that you can use <code>@ConfigurerOption</code> in the method signature to pass some <code>Configurer</code> configurations.</p>
</div>
<div class="paragraph">
<p>For example, if you have the following <code>Configurer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class BasicConfigurer implements Configurer {
    @Override
    public void configure(final Connection connection, final ConfigurerConfiguration configuration) {
        final String user = configuration.get("username", String.class);
        final String pwd = configuration.get("password", String.class);
        connection.withHeader(
            "Authorization",
            Base64.getEncoder().encodeToString((user + ':' + pwd).getBytes(StandardCharsets.UTF_8)));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then set it on a method to automatically add the basic header with this kind of API usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface APIClient extends HttpClient {
    @Request(path = "...")
    @UseConfigurer(BasicConfigurer.class)
    Record findRecord(@ConfigurerOption("username") String user, @ConfigurerOption("password") String pwd);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 relatedlinks">
<h2 id="_related_articles"><a class="anchor" href="#_related_articles"></a>Related articles</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="services-internationalization.html" class="page">Internationalizing a service</a></p>
</li>
<li>
<p><a href="services-actions.html" class="page">Providing actions through a service</a></p>
</li>
<li>
<p><a href="services-interceptors.html" class="page">Services and interceptors</a></p>
</li>
<li>
<p><a href="services-custom-api.html" class="page">Defining a custom API</a></p>
</li>
</ul>
</div>
</div>
</div>
    </article>
  </main>
</div>
<footer class="footer">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links" style="">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright" style="">&copy; 2018 Talend Inc. All rights reserved.</div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script>
(function (window, document) {
  hljs.initHighlighting();

  var closedSize = '50px';
  document.querySelectorAll('.listingblock')
    .forEach(function (listingblock, index) {
      var pre = listingblock.querySelector('div.content > pre.highlightjs.highlight');
      if (!pre) {return;}
      var code = pre.querySelector('code.hljs');
      if (!code) {return;}

      var span = document.createElement('span');
      var initialBlockClosed = listingblock.className.indexOf('initial-block-closed') >= 0;
      span.className = 'code-' + (initialBlockClosed ? 'collapsed' : 'open') + '-handle code-handle-base';

      var height = code.style.height;
      if (initialBlockClosed) {code.style.height = closedSize;}

      span.addEventListener('click', function () {
        if (span.className == 'code-collapsed-handle code-handle-base') {
          code.style.height = height;
          span.className = 'code-open-handle code-handle-base';
        } else {
          code.style.height = closedSize;
          span.className = 'code-collapsed-handle code-handle-base';
        }
      }, false);

      pre.prepend(span);
    });
})(window, document);
</script>
  </body>
</html>
