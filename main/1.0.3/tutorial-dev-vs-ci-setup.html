<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing in a Continuous Integration environment :: Talend Component Kit Developer Reference Guide</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.0.3/tutorial-dev-vs-ci-setup.html">
    <meta name="generator" content="Antora 1.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta name="date" content="2018-07-17T17:18:42.354Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch.min.css" integrity="sha256-vusmcqkVvKdkwoueSJZLlO9y2P+Lp9fN3WwQUV9Uwfw=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch-theme-algolia.min.css" integrity="sha256-ZqsS4QagZnfArbOyheCO4qVjzzsMbg/WMvf5tLtId/Q=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','GTM-PSBN')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
    <nav class="navbar">
        <div class="navbar-brand">
            <div class="navbar-item">
                <a href="https://talend.github.io/component-runtime">Talend Component Kit</a>
                <span class="separator">//</span>
                <a href="https://talend.github.io/component-runtime">Docs</a>
            </div>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <div class="global-search">
                    <form role="search" action="search.html">
                        <div>
                            <input class="rounded" type="text" placeholder="Search" name="query" id="searchInput">
                            <input type="hidden" name="idx" value="githubantora">
                        </div>
                    </form>
                </div>
                <div class="navbar-item has-dropdown is-hoverable">
                    <div class="navbar-link">Projects</div>
                    <div class="navbar-dropdown">
                        <div class="navbar-item"><strong>API</strong></div>
                        <a class="navbar-item" href="https://github.com/talend/component-api">Repository</a>
                        <hr class="navbar-divider">
                        <div class="navbar-item"><strong>Runtime</strong></div>
                        <a class="navbar-item" href="https://github.com/talend/component-runtime">Repository</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="main" data-version="1.0.3">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Talend Component Kit Developer Reference Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Programming Model</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_definition">Component definition</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#partition-mapper">PartitionMapper</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_definition">Definition</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_assessor">@Assessor</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_split">@Split</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_emitter">@Emitter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_producer">Producer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_processor">Processor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_multiple_outputs">Multiple outputs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_multiple_inputs">Multiple inputs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_output">Output</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_combiners">Combiners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_family_and_component_icons">Family and component icons</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_configuring_components">Configuring components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_primitives">Primitives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_complex_object_mapping">Complex object mapping</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_list_case">List case</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_map_case">Map case</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_defining_constraints_and_validations_on_the_configuration">Defining Constraints and validations on the configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_marking_a_configuration_as_a_particular_type_of_data">Marking a configuration as a particular type of data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_defining_links_between_properties">Defining links between properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#documentation-ui-hints">Adding hints about the rendering based on configuration/component knowledge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_widget_and_validation_gallery">Widget and validation gallery</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_widgets">Widgets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_validations">Validations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_registering_components">Registering components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_components_metadata">Components metadata</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_managing_version_configuration">Managing version configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_partitionmapper">@PartitionMapper</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_emitter_2">@Emitter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_processor_2">@Processor</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_internationalization">Component internationalization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_default_components_keys">Default components keys</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Package</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_loading">Component Loading</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_packaging_a_plugin">Packaging a plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_packaging_an_application">Packaging an application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_dependencies">Dependencies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_creating_a_nested_maven_repository_with_maven_shade_plugin">Creating a nested Maven repository with maven-shade-plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_listing_needed_plugins">Listing needed plugins</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_maven_shade_plugin_extensions">maven-shade-plugin extensions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_containerdependenciestransformer">ContainerDependenciesTransformer</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_plugintransformer">PluginTransformer</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_scanning_rules_and_default_exclusions">Component scanning rules and default exclusions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_jars_scanning">Jars Scanning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_package_scanning">Package Scanning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Build tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_maven_plugin">Maven Plugin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_dependencies_2">Dependencies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_validate">Validate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_documentation">Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_rendering_your_documentation">Rendering your documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_html_rendering">HTML rendering</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_pdf_rendering">PDF rendering</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_including_the_documentation_into_a_document">Including the documentation into a document</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_testing_a_component_web_rendering">Testing a component web rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_generating_inputs_or_outputs">Generating inputs or outputs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_talend_component_archive">Talend Component Archive</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation.html#_gradle_plugin">Gradle Plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_internationalizing_services">Internationalizing services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_internationalization_api">Internationalization API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_providing_actions_for_consumers">Providing actions for consumers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_particular_action_types">Particular action types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_internationalization">Internationalization</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_built_in_services">Built-in services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#httpclient_usage">Using HttpClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_customizing_http_client_requests">Customizing HTTP client requests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation.html#_services_and_interceptors">Services and interceptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_creating_a_job_pipeline">Creating a job pipeline</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_job_builder">Job Builder</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_environmentrunner">Environment/Runner</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_key_provider">Key Provider</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_beam_case">Beam case</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_inputs_and_outputs">Inputs and Outputs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_processors">Processors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_converting_a_beam_io_into_a_component_io">Converting a Beam.io into a component I/O</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_advanced_defining_a_custom_api">Advanced: defining a custom API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_extending_the_ui">Extending the UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_testing_best_practices">Testing best practices</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_parameterized_tests">Parameterized tests</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_junit_4">JUnit 4</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_junit_5">JUnit 5</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_runtime_testing">component-runtime-testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_runtime_junit">component-runtime-junit</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_junit_4_2">JUnit 4</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_junit_5_2">JUnit 5</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_mocking_the_output">Mocking the output</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_mocking_the_input">Mocking the input</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_creating_runtime_configuration_from_component_configuration">Creating runtime configuration from component configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_testing_a_mapper">Testing a Mapper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_testing_a_processor">Testing a Processor</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_component_runtime_testing_spark">component-runtime-testing-spark</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_junit_4_3">JUnit 4</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_junit_5_3">JUnit 5</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_checking_the_job_execution_status">Checking the job execution status</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#component-runtime-http-junit">component-runtime-http-junit</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_junit_4_4">JUnit 4</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_ssl">SSL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_junit_5_4">JUnit 5</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="documentation.html#_ssl_2">SSL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_capturing_mode">Capturing mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_passthrough_mode">Passthrough mode</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation.html#_beam_testing">Beam testing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_testing_on_multiple_environments">Testing on multiple environments</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_junit_4_5">JUnit 4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_junit_5_5">JUnit 5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html#_provided_environments">Provided environments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documentation.html#_configuring_environments">Configuring environments</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documentation.html#_advanced_usage">Advanced usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation.html#_secretspasswords_and_maven">Secrets/Passwords and Maven</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation.html#_generating_data">Generating data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-generate-project-using-starter.html">Generate a component</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-create-an-input-component.html">Create an input component</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-create-an-output-component.html">Create an output component</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-test-your-components.html">Test your components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-configuration-sensitive-data.html">Configuration and sensitive data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-create-components-rest-api.html">Create components for REST API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-test-rest-api.html">How to test a REST API</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-talend-intellij-plugin-usage.html">Talend Intellij plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Web</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation-rest.html">Server</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="server-uispec.html">UiSpec Server</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Talend Component Kit Developer Reference Guide</span>
    <span class="version">1.0.3</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Talend Component Kit Developer Reference Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0.3</a>
        </li>
        <li class="version">
          <a href="../1.0.2/index.html">1.0.2</a>
        </li>
        <li class="version">
          <a href="../1.0.1/index.html">1.0.1</a>
        </li>
        <li class="version">
          <a href="../1.0.0/index.html">1.0.0</a>
        </li>
        <li class="version">
          <a href="../0.0.12/index.html">0.0.12</a>
        </li>
        <li class="version">
          <a href="../0.0.11/index.html">0.0.11</a>
        </li>
        <li class="version">
          <a href="../0.0.10/index.html">0.0.10</a>
        </li>
        <li class="version">
          <a href="../0.0.9/index.html">0.0.9</a>
        </li>
        <li class="version">
          <a href="../0.0.8/index.html">0.0.8</a>
        </li>
        <li class="version">
          <a href="../0.0.7/index.html">0.0.7</a>
        </li>
        <li class="version">
          <a href="../0.0.6/index.html">0.0.6</a>
        </li>
        <li class="version">
          <a href="../0.0.5/index.html">0.0.5</a>
        </li>
        <li class="version">
          <a href="../0.0.4/index.html">0.0.4</a>
        </li>
        <li class="version">
          <a href="../0.0.3/index.html">0.0.3</a>
        </li>
        <li class="version">
          <a href="../0.0.2/index.html">0.0.2</a>
        </li>
        <li class="version">
          <a href="../0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
    <button class="navigation-toggle"></button>
    <nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Talend Component Kit Developer Reference Guide</a></li>
    <li class="crumb">Tutorials</li>
    <li class="crumb"><a href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a></li>
  </ul>
</nav>
    <div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">1.0.3</button>
  <div class="versions-menu">
    <a class="version is-current" href="tutorial-dev-vs-ci-setup.html">1.0.3</a>
    <a class="version" href="../1.0.2/tutorial-dev-vs-ci-setup.html">1.0.2</a>
    <a class="version" href="../1.0.1/tutorial-dev-vs-ci-setup.html">1.0.1</a>
    <a class="version" href="../1.0.0/tutorial-dev-vs-ci-setup.html">1.0.0</a>
    <a class="version" href="../0.0.12/tutorial-dev-vs-ci-setup.html">0.0.12</a>
    <a class="version" href="../0.0.11/tutorial-dev-vs-ci-setup.html">0.0.11</a>
    <a class="version" href="../0.0.10/tutorial-dev-vs-ci-setup.html">0.0.10</a>
    <a class="version" href="../0.0.9/tutorial-dev-vs-ci-setup.html">0.0.9</a>
    <a class="version" href="../0.0.8/tutorial-dev-vs-ci-setup.html">0.0.8</a>
    <a class="version" href="../0.0.7/tutorial-dev-vs-ci-setup.html">0.0.7</a>
    <a class="version" href="../0.0.6/tutorial-dev-vs-ci-setup.html">0.0.6</a>
    <a class="version" href="../0.0.5/tutorial-dev-vs-ci-setup.html">0.0.5</a>
    <a class="version" href="../0.0.4/tutorial-dev-vs-ci-setup.html">0.0.4</a>
    <a class="version" href="../0.0.3/tutorial-dev-vs-ci-setup.html">0.0.3</a>
    <a class="version" href="../0.0.2/tutorial-dev-vs-ci-setup.html">0.0.2</a>
    <a class="version is-missing" href="../0.0.1/index.html">0.0.1</a>
  </div>
</div>
</div>
<article class="doc">
        <h1>Testing in a Continuous Integration environment</h1>
        <div id="preamble">
<div class="sectionbody">
<div id="tutorial-dev-vs-ci-setup.adoc" class="paragraph">
<p>This tutorial shows how to adapt the test configuration of the Zendesk search component that was done in <a href="tutorial-test-rest-api.html" class="page">this previous tutorial</a> to make it work in a Continuous Integration environment.</p>
</div>
<div class="paragraph">
<p>In the test, the Zendesk credentials are used directly in the code to perform a first capture of the API response. Then, fake credentials are used in the simulation mode because the real API is not called anymore.</p>
</div>
<div class="paragraph">
<p>However, in some cases, you can require to continue calling the real API on a CI server or on a specific environment.</p>
</div>
<div class="paragraph">
<p>To do that, you can adapt the test to get the credentials depending on the execution mode (simulation/passthrough).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_credentials"><a class="anchor" href="#_setting_up_credentials"></a>1. Setting up credentials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These instructions concern the CI server or on any environment that requires real credentials.</p>
</div>
<div class="paragraph">
<p>This tutorial uses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="https://maven.apache.org/guides/mini/guide-encryption.html">Maven server</a> that supports password encryption as a credential provider. Encryption is optional but recommended.</p>
</li>
<li>
<p>The <code>MavenDecrypterRule</code> test rule provided by the framework. This rule lets you get credentials from Maven settings using a server ID.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create encrypted server credentials for the Zendesk instance:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a master password using the command: <code>mvn --encrypt-master-password &lt;password&gt;</code>.</p>
</li>
<li>
<p>Store this master password in the <code>settings-security.xml</code> file of the <code>~/.m2</code> folder.</p>
</li>
<li>
<p>Encrypt the Zendesk instance password using the command: <code>mvn --encrypt-password &lt;zendesk-password&gt;</code>.</p>
</li>
<li>
<p>Create a server entry under <strong>servers</strong> in Maven <code>settings.xml</code> file located in the <code>~/.m2</code> folder.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>    &lt;server&gt;
      &lt;id&gt;zendesk&lt;/id&gt;
      &lt;username&gt;username@email.com&lt;/username&gt;
      &lt;password&gt;The encrypted password {oL37x/xiSvwtlhrMQ=}&lt;/password&gt;
    &lt;/server&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can store the <code>settings-security.xml</code> and <code>settings.xml</code> files elsewhere that the default location (<code>~/.m2</code>). To do that, set the path of the directory containing the files
in the <code>talend.maven.decrypter.m2.location</code> environment variable.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adapting_the_unit_test"><a class="anchor" href="#_adapting_the_unit_test"></a>2. Adapting the unit test</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the <code>MavenDecrypterRule</code> rule to the test class. This rule allows to inject server information stored in Maven <code>settings.xml</code> file to the test. The rule also decrypts credentials if they are encrypted.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchTest {

    @Rule
    public final MavenDecrypterRule mavenDecrypterRule = new MavenDecrypterRule(this);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Inject the Zendesk server to the test. To do that, add a new field to the class with the <code>@DecryptedServer</code> annotation, that holds the server ID to be injected.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchTest {

    @Rule
    public final MavenDecrypterRule mavenDecrypterRule = new MavenDecrypterRule(this);

    @DecryptedServer("zendesk")
    private Server server;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MavenDecrypterRule</code> is able to inject the server instance into this class at runtime. The server instance contains the username and the decrypted password.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Use the <code>server</code> instance in the test to get the real credentials in a secured manner.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BasicAuth basicAuth = new BasicAuth("https://instance.zendesk.com",
                            server.getUsername(),
                            server.getPassword());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once modified, the complete test class looks as follows:</p>
</div>
<div class="listingblock initial-block-closed">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchTest {

    @ClassRule
    public static final SimpleComponentRule component = new SimpleComponentRule("component.package");

    private final MavenDecrypter mavenDecrypter = new MavenDecrypter();

    @ClassRule
    public static final JUnit4HttpApi API = new JUnit4HttpApi()
                                                        .activeSsl();

    @Rule
    public final JUnit4HttpApiPerMethodConfigurator configurator = new JUnit4HttpApiPerMethodConfigurator(API);

    @Rule
    public final MavenDecrypterRule mavenDecrypterRule = new MavenDecrypterRule(this);

    @DecryptedServer("zendesk")
    private Server server;

    @Test
    public void searchQuery() {
        // Initiating the component test configuration
        BasicAuth basicAuth = new BasicAuth("https://instance.zendesk.com", server.getUsername(), server.getPassword());
        final SearchQuery searchQuery = new SearchQuery(basicAuth, "type:ticket status:open", "created_at", "desc");

        // We convert our configuration instance to URI configuration
        final String uriConfig = SimpleFactory.configurationByExample()
                        .forInstance(searchQuery)
                        .configured().toQueryString();

        // We create our job test pipeline
        Job.components()
                .component("search", "zendesk://search?" + uriConfig)
                .component("collector", "test://collector")
                .connections()
                .from("search").to("collector")
                .build()
                .run();

        final List&lt;JsonObject&gt; res = component.getCollectedData(JsonObject.class);
        assertEquals(4, res.size());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>This test will continue to work in simulation mode</strong>, because the API simulation proxy is activated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_ci_server_in_passthrough_mode"><a class="anchor" href="#_setting_up_the_ci_server_in_passthrough_mode"></a>3. Setting up the CI server in passthrough mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows how to set up a CI server in passthrough mode using <a href="https://jenkins.io/">Jenkins</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to Jenkins.</p>
</li>
<li>
<p>Click <strong>New Item</strong> to create a new build job.</p>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/1_jenkins_new_item.png" alt="Create a new job">
</div>
</div>
</li>
<li>
<p>Enter an Item name (Job name) and choose the freestyle job. Then click OK.</p>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/2_jenkins_new_item.png" alt="Create a new job">
</div>
</div>
</li>
<li>
<p>In the <strong>Source Code Management</strong> section, enter your project repository URL. A GitHub repository is used in this tutorial.</p>
</li>
<li>
<p>Specify the <code>master</code> branch as <strong>Branches to build</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/4_jenkins_source_code.png" alt="Source Code Management">
</div>
</div>
</li>
<li>
<p>In the <strong>Build</strong> section, click <strong>Add build step</strong> and choose <strong>Invoke top-level Maven targets</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/6_jenkins_build_cmd.png" alt="Build Section">
</div>
</div>
</li>
<li>
<p>Choose your Maven version and enter the Maven build command. In this case: <code>clean install</code>. Then, click <strong>Save</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/6_jenkins_build_cmd_2.png" alt="Build Section">
</div>
</div>
<div class="paragraph">
<p>The <code>-Dtalend.junit.http.passthrough=true</code> option is part of the build command.
This option tells the API simulation proxy to run in <code>passthrough</code> mode. This way, all the HTTP requests made in the test are forwarded to the real API server.</p>
</div>
<div class="paragraph">
<p>The <code>MavenDecrypterRule</code> rule allows to get the real credentials.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can configure the <strong>passthrough</strong> mode globally on your CI server by setting the <code>talend.junit.http.passthrough</code> environment variable to <code>true</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Test the job by selecting <strong>Build now</strong>, and check that the job has built correctly.</p>
<div class="imageblock">
<div class="content">
<img src="_images/jenkins/7_jenkins_build_result.png" alt="Test the job">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now your tests run in a simulation mode on your development environment and in a passthrough mode on your CI server.</p>
</div>
</div>
</div>
    </article>
  </main>
</div>
<footer class="footer">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links" style="">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright" style="">&copy; 2018 Talend Inc. All rights reserved.</div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script>
(function (window, document) {
  hljs.initHighlighting();

  var closedSize = '50px';
  document.querySelectorAll('.listingblock')
    .forEach(function (listingblock, index) {
      var pre = listingblock.querySelector('div.content > pre.highlightjs.highlight');
      if (!pre) {return;}
      var code = pre.querySelector('code.hljs');
      if (!code) {return;}

      var span = document.createElement('span');
      var initialBlockClosed = listingblock.className.indexOf('initial-block-closed') >= 0;
      span.className = 'code-' + (initialBlockClosed ? 'collapsed' : 'open') + '-handle code-handle-base';

      var height = code.style.height;
      if (initialBlockClosed) {code.style.height = closedSize;}

      span.addEventListener('click', function () {
        if (span.className == 'code-collapsed-handle code-handle-base') {
          code.style.height = height;
          span.className = 'code-open-handle code-handle-base';
        } else {
          code.style.height = closedSize;
          span.className = 'code-collapsed-handle code-handle-base';
        }
      }, false);

      pre.prepend(span);
    });
})(window, document);
</script>
  </body>
</html>
