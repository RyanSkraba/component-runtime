<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talend Component Kit Developer Reference Guide :: Registering components</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.0.4/component-registering.html">
    <meta name="generator" content="Talend Component Kit Generator">
<meta name="date" content="2018-08-01T09:16:19.079Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch.min.css" integrity="sha256-vusmcqkVvKdkwoueSJZLlO9y2P+Lp9fN3WwQUV9Uwfw=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch-theme-algolia.min.css" integrity="sha256-ZqsS4QagZnfArbOyheCO4qVjzzsMbg/WMvf5tLtId/Q=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@talend/bootstrap-theme@0.200.1/dist/bootstrap.css">
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','GTM-PSBN')</script>
  </head>
  <body>
      <header class="global-header">
  <nav class="navbar navbar-default">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">Component Kit  0.0.3</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Versions <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li class="navbar-item version is-latest">
                <a href="../1.0.4/index.html">1.0.4</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.3/index.html">1.0.3</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.2/index.html">1.0.2</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.1/index.html">1.0.1</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.0/index.html">1.0.0</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.12/index.html">0.0.12</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.11/index.html">0.0.11</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.10/index.html">0.0.10</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.9/index.html">0.0.9</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.8/index.html">0.0.8</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.7/index.html">0.0.7</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.6/index.html">0.0.6</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.5/index.html">0.0.5</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.4/index.html">0.0.4</a>
              </li>
              <li class="navbar-item version is-current">
                <a href="index.html">0.0.3</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.2/index.html">0.0.2</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.1/index.html">0.0.1</a>
              </li>
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Repositories <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="https://github.com/talend/component-api" target="_blank">API</a></li>
              <li><a class="navbar-item" href="https://github.com/talend/component-runtime" target="_blank">Runtime</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="contributors.html">Contributors</a></li>
              <li><a class="navbar-item" href="https://community.talend.com/t5/Component-Development/bd-p/ComponentDevelopment" target="_blank">Forum</a></li>
            </ul>
          </li>
        </ul>
        <form role="search" action="search.html" class="navbar-form navbar-right">
          <div class="input-group">
            <span class="input-group-addon"><i class="fa fa-search"></i></span>
            <input class="form-control" type="text" placeholder="Search" name="query" id="searchInput">
          </div>
        </form>
      </div>
    </nav>
</header>
            <main class="main">
              <div class="navigation-container grey-background hidden-xs col-sm-2" data-component="main" data-version="0.0.3">
  <aside class="navigation" role="navigation">
    <div class="panels">
      <div class="input-group nav-filter-group">
        <span class="input-group-addon"><i class="fa fa-search"></i></span>
        <input class="form-control" type="text" placeholder="Filter menu entries..." id="navFilterInput">
      </div>
      <div class="navigation-menu is-active" data-panel="menu">
        <nav class="nav-menu">
          <!-- <label>Talend Component Kit Developer Reference Guide</label> -->
          <ul class="nav nav-list tree" >
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Programming Model</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="component-definition.html">Definition Model</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="component-configuration.html">Configuration</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="component-registering.html">Registration</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="gallery.html">Widget Gallery</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="component-internationalization.html">Labels and i18n</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Package</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="component-loading.html">Loading</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Build</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="build-tools-maven.html">Maven</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="build-tools-gradle.html">Gradle</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Services</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="services-internationalization.html">Internationalization</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-actions.html">Actions</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-built-in.html">Built-in services</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-interceptors.html">Interceptors</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-custom-api.html">Extend the API</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Execute</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="testing-best-practices.html">JUnit Integration</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-junit.html">Testing HTTP API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-beam.html">Beam case</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-spark.html">Spark and JUnit</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-multiple-envs.html">Multiple environments for the same tests</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-maven-passwords.html">Secrets/Passwords and Maven</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="testing-generating-data.html">Generating data?</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Web</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="documentation-rest.html">Server</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Tutorials</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="tutorial-generate-project-using-starter.html">Generate a component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-an-input-component.html">Create an input component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-an-output-component.html">Create an output component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-test-your-components.html">Test your components</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-configuration-sensitive-data.html">Configuration and sensitive data</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-components-rest-api.html">Create components for REST API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-test-rest-api.html">How to test a REST API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a>
  </li>
</ul>
  </li>
</ul>
        </nav>
      </div>
    </div>
  </aside>
</div>
              <div class="col-xs-12 col-sm-10 maincontent">
                <div class="toolbar" role="navigation">

    <ol class="breadcrumb grey-background">
      <li class="crumb"><a href="#">Programming Model</a></li>
      <li class="crumb active"><a href="component-registering.html">Registration</a></li>
    </ol>
</div>
                <article class="doc">
        <div class="row">
          <div class="col-sm-9 row">
              <h1>Registering components</h1>
            <div class="article-content">
              <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As seen in the <a href="getting-started.html#getting-started-first-quick-start" class="page">Getting Started</a>, you need an annotation to register
your component through <code>family</code> method. Multiple components can use the same <code>family</code> value but the pair <code>family</code>+<code>name</code>
<code>MUST</code> be unique for the system.</p>
</div>
<div class="paragraph">
<p>If you desire (recommended) to share the same component family name instead of repeating yourself in all <code>family</code> methods,
you can use <code>@Components</code> annotation on the root package of you component, it will enable you to define the component family and
the categories the component belongs to (default is <code>Misc</code> if not set). Here is a sample <code>package-info.java</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Components(name = "my_component_family", categories = "My Category")
package org.talend.sdk.component.sample;

import org.talend.sdk.component.api.component.Components;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For an existing component it can look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Components(name = "Salesforce", categories = {"Business", "Cloud"})
package org.talend.sdk.component.sample;

import org.talend.sdk.component.api.component.Components;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_components_metadata"><a class="anchor" href="#_components_metadata"></a>Components metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Components can require a few metadata to be integrated in Talend Studio or Cloud platform. Here is how to provide these information.
These metadata are set on the component class and belongs to <code>org.talend.sdk.component.api.component</code> package.</p>
</div>
<table class="tableblock frame-all grid-all">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@Icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set an icon key used to represent the component. Note you can use a custom key with <code>custom()</code> method but it is not guaranteed the icon will be rendered properly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@Version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the component version, default to 1.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Icon(FILE_XML_O)
@PartitionMapper(name = "jaxbInput")
public class JaxbPartitionMapper implements Serializable {
    // ...
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_management_of_configuration_versions"><a class="anchor" href="#_management_of_configuration_versions"></a>Management of configuration versions</h3>
<div class="paragraph">
<p>If some impacting changes happen on the configuration they can be manage through a migration handler at <strong>component</strong> level (to enable
to support trans-model migration).</p>
</div>
<div class="paragraph">
<p>The <code>@Version</code> annotation supports a <code>migrationHandler</code> method which will take the implementation migrating the incoming configuration
to the current model.</p>
</div>
<div class="paragraph">
<p>For instance if <code>filepath</code> configuration entry from v1 changed to <code>location</code> in v2 you can remap the value to the right key in your
<code>MigrationHandler</code> implementation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
it is recommanded to not manage all migrations in the handler but rather split it in services you inject in the migration handler
(through constructor):
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// full component code structure skipped for brievity, kept only migration part
@Version(value = 3, migrationHandler = MyComponent.Migrations.class)
public class MyComponent {
    // the component code...


    private interface VersionConfigurationHandler {
        Map&lt;String, String&gt; migrate(Map&lt;String, String&gt; incomingData);
    }

    public static class Migrations {
        private final List&lt;VersionConfigurationHandler&gt; handlers;

        // VersionConfigurationHandler implementations are decorated with @Service
        public Migrations(final List&lt;VersionConfigurationHandler&gt; migrations) {
            this.handlers = migrations;
            this.handlers.sort(/*some custom logic*/);
        }

        @Override
        public Map&lt;String, String&gt; migrate(int incomingVersion, Map&lt;String, String&gt; incomingData) {
            Map&lt;String, String&gt; out = incomingData;
            for (MigrationHandler handler : handlers) {
                out = handler.migrate(out);
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is important in this snippet is not much the way the code is organized but rather the fact you organize your migrations the way which fits the best
your component. If migrations are not conflicting no need of something fancy, just apply them all but if you need to apply them in order
you need to ensure they are sorted. Said otherwise: don&#8217;t see this API as a migration API but as a migration callback
and adjust the migration code structure you need behind the <code>MigrationHandler</code> based on your
component requirements. The service injection enables you to do so.</p>
</div>
</div>
<div class="sect2">
<h3 id="_partitionmapper"><a class="anchor" href="#_partitionmapper"></a>@PartitionMapper</h3>
<div class="paragraph">
<p><code>@PartitionMapper</code> will obviously mark a partition mapper:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PartitionMapper(family = "demo", name = "my_mapper")
public class MyMapper {
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_emitter"><a class="anchor" href="#_emitter"></a>@Emitter</h4>
<div class="paragraph">
<p><code>@Emitter</code> is a shortcut for <code>@PartitionMapper</code> when you don&#8217;t support distribution. Said otherwise it will enforce an implicit
partition mapper execution with an assessor size of 1 and a split returning itself.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Emitter(family = "demo", name = "my_input")
public class MyInput {
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processor"><a class="anchor" href="#_processor"></a>@Processor</h3>
<div class="paragraph">
<p>A method decorated with <code>@Processor</code> will be considered as a producer factory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(family = "demo", name = "my_processor")
public class MyProcessor {
}</code></pre>
</div>
</div>
</div>
</div>
</div>
            </div>
          </div>
          <div class="col-sm-3 container article-side-panel">
            <nav class="article-anchors">
              <div class="article-side-actions">
                <h1>Actions</h1>
                <ul class="list-inline">
                    <li>
                      <a class="article-side-actions-link" target="_blank" href="https://github.com/Talend/component-runtime/blob/component-runtime-0.0.3/documentation/src/main/antora/modules/ROOT/pages/component-registering.adoc">
                        <i class="fa fa-edit"></i>
                      </a>
                    </li>
                    <li>
                        <ul class="list-inline">
                            <li>
                                <a class="article-side-actions-link" target="_blank"
                                   href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.0.4%2Fcomponent-registering.html&text=Talend%20Component%20Kit%20%3E%3E%20Registering%20components%20%3E%3E%20&tw_p=tweetbutton&url=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.0.4%2Fcomponent-registering.html">
                                    <i class="fab fa-twitter"></i>
                                </a>
                            </li>
                            <li>
                                <a class="article-side-actions-link"
                                   href="mailto:?subject=Talend%20Component%20Kit%3A%20Registering%20components&body=Talend%20Component%20Kit%3A%20Registering%20components%0A%0Ahttps%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.0.4%2Fcomponent-registering.html">
                                    <i class="far fa-envelope"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
              </div>
              <h1>On this page</h1>
            </nav>
          </div>
          <a href="#top" class="top">Scroll to top</a>
        </div>
        <script>(window.talend = (window.talend || {})).article = true;</script>
    </article>
              </div>
            </main>
      </main>
      <footer class="footer ">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links" style="">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright" style="">&copy; 2018 Talend Inc. All rights reserved.</div>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/rmannibucau/00206484a54ac569e091513e6d2a1c01/raw/46cd5d77ba1abe678f83d11490e12a327b62d7ee/anchorific.js"></script>
<script src="../../_/js/talend.js"></script>
  </body>
</html>
