<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talend Component Kit Developer Reference Guide :: Testing on multiple environments</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.0.4/testing-multiple-envs.html">
    <meta name="generator" content="Talend Component Kit Generator">
<meta name="date" content="2018-07-30T09:45:09.584Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch.min.css" integrity="sha256-vusmcqkVvKdkwoueSJZLlO9y2P+Lp9fN3WwQUV9Uwfw=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.8.0/instantsearch-theme-algolia.min.css" integrity="sha256-ZqsS4QagZnfArbOyheCO4qVjzzsMbg/WMvf5tLtId/Q=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@talend/bootstrap-theme@0.200.1/dist/bootstrap.css">
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','GTM-PSBN')</script>
  </head>
  <body>
      <header class="global-header">
  <nav class="navbar navbar-default">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">Component Kit  1.0.2</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Versions <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li class="navbar-item version is-latest">
                <a href="../1.0.4/index.html">1.0.4</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.3/index.html">1.0.3</a>
              </li>
              <li class="navbar-item version is-current">
                <a href="index.html">1.0.2</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.1/index.html">1.0.1</a>
              </li>
              <li class="navbar-item version">
                <a href="../1.0.0/index.html">1.0.0</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.12/index.html">0.0.12</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.11/index.html">0.0.11</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.10/index.html">0.0.10</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.9/index.html">0.0.9</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.8/index.html">0.0.8</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.7/index.html">0.0.7</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.6/index.html">0.0.6</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.5/index.html">0.0.5</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.4/index.html">0.0.4</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.3/index.html">0.0.3</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.2/index.html">0.0.2</a>
              </li>
              <li class="navbar-item version">
                <a href="../0.0.1/index.html">0.0.1</a>
              </li>
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Repositories <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="https://github.com/talend/component-api" target="_blank">API</a></li>
              <li><a class="navbar-item" href="https://github.com/talend/component-runtime" target="_blank">Runtime</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="contributors.html">Contributors</a></li>
              <li><a class="navbar-item" href="https://community.talend.com/t5/Component-Development/bd-p/ComponentDevelopment" target="_blank">Forum</a></li>
            </ul>
          </li>
        </ul>
        <form role="search" action="search.html" class="navbar-form navbar-right">
          <div class="input-group">
            <span class="input-group-addon"><i class="fa fa-search"></i></span>
            <input class="form-control" type="text" placeholder="Search" name="query" id="searchInput">
          </div>
        </form>
      </div>
    </nav>
</header>
            <main class="main">
              <div class="navigation-container grey-background hidden-xs col-sm-2" data-component="main" data-version="1.0.2">
  <aside class="navigation" role="navigation">
    <div class="panels">
      <div class="navigation-menu is-active" data-panel="menu">
        <nav class="nav-menu">
          <!-- <label>Talend Component Kit Developer Reference Guide</label> -->
          <ul class="nav nav-list tree" >
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Programming Model</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Component definition</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>PartitionMapper</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Definition</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_assessor">@Assessor</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_split">@Split</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_emitter">@Emitter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_producer">Producer</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_processor">Processor</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_multiple_outputs">Multiple outputs</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_multiple_inputs">Multiple inputs</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_output">Output</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_combiners">Combiners</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_family_and_component_icons">Family and component icons</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Configuring components</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_primitives">Primitives</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Complex object mapping</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_list_case">List case</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_map_case">Map case</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_defining_constraints_and_validations_on_the_configuration">Defining Constraints and validations on the configuration</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_marking_a_configuration_as_a_particular_type_of_data">Marking a configuration as a particular type of data</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_defining_links_between_properties">Defining links between properties</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#documentation-ui-hints">Adding hints about the rendering based on configuration/component knowledge</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Widget and validation gallery</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_widgets">Widgets</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_validations">Validations</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Registering components</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Components metadata</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_managing_version_configuration">Managing version configuration</a>
  </li>
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>@PartitionMapper</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_emitter_2">@Emitter</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_processor_2">@Processor</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Component internationalization</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_default_components_keys">Default components keys</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Package</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Component Loading</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_packaging_a_plugin">Packaging a plugin</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Packaging an application</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Dependencies</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_creating_a_nested_maven_repository_with_maven_shade_plugin">Creating a nested Maven repository with maven-shade-plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_listing_needed_plugins">Listing needed plugins</a>
  </li>
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>maven-shade-plugin extensions</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_containerdependenciestransformer">ContainerDependenciesTransformer</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_plugintransformer">PluginTransformer</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Component scanning rules and default exclusions</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_jars_scanning">Jars Scanning</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_package_scanning">Package Scanning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Build tools</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Maven Plugin</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_dependencies_2">Dependencies</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_validate">Validate</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Documentation</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Rendering your documentation</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_html_rendering">HTML rendering</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_pdf_rendering">PDF rendering</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_including_the_documentation_into_a_document">Including the documentation into a document</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_testing_a_component_web_rendering">Testing a component web rendering</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_generating_inputs_or_outputs">Generating inputs or outputs</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_talend_component_archive">Talend Component Archive</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_gradle_plugin">Gradle Plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Services</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Internationalizing services</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_internationalization_api">Internationalization API</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Providing actions for consumers</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_particular_action_types">Particular action types</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_internationalization">Internationalization</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Built-in services</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Using HttpClient</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_customizing_http_client_requests">Customizing HTTP client requests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_services_and_interceptors">Services and interceptors</a>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Creating a job pipeline</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Job Builder</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_environmentrunner">Environment/Runner</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_key_provider">Key Provider</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Beam case</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_inputs_and_outputs">Inputs and Outputs</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_processors">Processors</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_converting_a_beam_io_into_a_component_io">Converting a Beam.io into a component I/O</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Advanced: defining a custom API</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_extending_the_ui">Extending the UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing best practices</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Parameterized tests</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_4">JUnit 4</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_5">JUnit 5</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-testing</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-junit</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_4_2">JUnit 4</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_5_2">JUnit 5</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_mocking_the_output">Mocking the output</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_mocking_the_input">Mocking the input</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_creating_runtime_configuration_from_component_configuration">Creating runtime configuration from component configuration</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_testing_a_mapper">Testing a Mapper</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_testing_a_processor">Testing a Processor</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-testing-spark</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_4_3">JUnit 4</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_5_3">JUnit 5</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_checking_the_job_execution_status">Checking the job execution status</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-http-junit</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>JUnit 4</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_ssl">SSL</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>JUnit 5</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_ssl_2">SSL</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_capturing_mode">Capturing mode</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_passthrough_mode">Passthrough mode</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_beam_testing">Beam testing</a>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing on multiple environments</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_junit_4_5">JUnit 4</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_junit_5_5">JUnit 5</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_provided_environments">Provided environments</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Configuring environments</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_advanced_usage">Advanced usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_secretspasswords_and_maven">Secrets/Passwords and Maven</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_generating_data">Generating data</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Tutorials</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="tutorial-generate-project-using-starter.html">Generate a component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-an-input-component.html">Create an input component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-an-output-component.html">Create an output component</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-test-your-components.html">Test your components</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-configuration-sensitive-data.html">Configuration and sensitive data</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-create-components-rest-api.html">Create components for REST API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-test-rest-api.html">How to test a REST API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-dev-vs-ci-setup.html">Dev vs CI setup</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="tutorial-talend-intellij-plugin-usage.html">Talend Intellij plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Web</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="documentation-rest.html">Server</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="server-uispec.html">UiSpec Server</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
</ul>
        </nav>
      </div>
    </div>
  </aside>
</div>
              <div class="col-xs-12 col-sm-10 maincontent">
                <div class="toolbar" role="navigation">

    <ol class="breadcrumb grey-background">
      <li class="crumb active"><a href="testing-multiple-envs.html">Testing on multiple environments</a></li>
    </ol>
</div>
                <article class="doc">
        <div class="row">
          <div class="col-sm-9 row">
              <h1>Testing on multiple environments</h1>
            <div class="article-content">
              <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>JUnit (4 or 5) already provides ways to parameterize tests and execute the same "test logic"
against several sets of data. However, it is not very convenient for testing multiple environments.</p>
</div>
<div class="paragraph">
<p>For example, with Beam, you can test your code against multiple runners. But it requires resolving conflicts between runner dependencies, setting the correct classloaders, and so on.</p>
</div>
<div class="paragraph">
<p>To simplify such cases, the framework provides you a multi-environment support for your tests, through the JUnit module, which works with both JUnit 4 and JUnit 5.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junit_4"><a class="anchor" href="#_junit_4"></a>JUnit 4</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(MultiEnvironmentsRunner.class)
@Environment(Env1.class)
@Environment(Env2.class)
public class TheTest {
    @Test
    public void test1() {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MultiEnvironmentsRunner</code> executes the tests for each defined environments. With the example above, it means that it runs <code>test1</code> for <code>Env1</code> and <code>Env2</code>.</p>
</div>
<div class="paragraph">
<p>By default, the <code>JUnit4</code> runner is used to execute the tests in one environment, but you can use <code>@DelegateRunWith</code> to use another runner.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junit_5"><a class="anchor" href="#_junit_5"></a>JUnit 5</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The multi-environment configuration with JUnit 5 is similar to JUnit 4:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Environment(EnvironmentsExtensionTest.E1.class)
@Environment(EnvironmentsExtensionTest.E2.class)
class TheTest {

    @EnvironmentalTest
    void test1() {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The main differences are that no runner is used because they do not exist in JUnit 5, and that you need to replace <code>@Test</code> by <code>@EnvironmentalTest</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
With JUnit5, tests are executed one after another for all environments, while tests are ran sequentially in each environments with JUnit 4. For example, this means that <code>@BeforeAll</code> and <code>@AfterAll</code> are executed once for all runners.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_provided_environments"><a class="anchor" href="#_provided_environments"></a>Provided environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The provided environment sets the contextual classloader in order to load the related runner of Apache Beam.</p>
</div>
<div class="paragraph">
<p>Package: <code>org.talend.sdk.component.junit.environment.builtin.beam</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the configuration is read from system properties, environment variables, &#8230;&#8203;.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all table-striped table-hover table-ordered">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ContextualEnvironment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contextual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contextual runner</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DirectRunnerEnvironment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Direct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Direct runner</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FlinkRunnerEnvironment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flink</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flink runner</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SparkRunnerEnvironment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spark runner</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_environments"><a class="anchor" href="#_configuring_environments"></a>Configuring environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the environment extends <code>BaseEnvironmentProvider</code> and therefore defines an environment name - which is the case of the default ones - you can use <code>EnvironmentConfiguration</code> to customize the system properties used for that environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Environment(DirectRunnerEnvironment.class)
@EnvironmentConfiguration(
    environment = "Direct",
    systemProperties = @EnvironmentConfiguration.Property(key = "beamTestPipelineOptions", value = "..."))

@Environment(SparkRunnerEnvironment.class)
@EnvironmentConfiguration(
    environment = "Spark",
    systemProperties = @EnvironmentConfiguration.Property(key = "beamTestPipelineOptions", value = "..."))

@Environment(FlinkRunnerEnvironment.class)
@EnvironmentConfiguration(
    environment = "Flink",
    systemProperties = @EnvironmentConfiguration.Property(key = "beamTestPipelineOptions", value = "..."))
class MyBeamTest {

    @EnvironmentalTest
    void execute() {
        // run some pipeline
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you set the <code>&lt;environment name&gt;.skip</code> system property to <code>true</code>, the environment-related executions are skipped.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_advanced_usage"><a class="anchor" href="#_advanced_usage"></a>Advanced usage</h3>
<div class="paragraph">
<p>This usage assumes that Beam 2.4.0 is used.</p>
</div>
<div class="paragraph">
<p>The following dependencies bring the JUnit testing toolkit, the Beam integration and the multi-environment testing toolkit for JUnit into the test scope.</p>
</div>
<div class="listingblock">
<div class="title">Dependencies</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
    &lt;artifactId&gt;component-runtime-junit&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.jboss.shrinkwrap.resolver&lt;/groupId&gt;
    &lt;artifactId&gt;shrinkwrap-resolver-impl-maven&lt;/artifactId&gt;
    &lt;version&gt;3.1.3&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
    &lt;artifactId&gt;component-runtime-beam&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the fluent DSL to define jobs, you can write a test as follows:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Your job must be linear and each step must send a single value (no multi-input or multi-output).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Environment(ContextualEnvironment.class)
@Environment(DirectRunnerEnvironment.class)
class TheComponentTest {
    @EnvironmentalTest
    void testWithStandaloneAndBeamEnvironments() {
        from("myfamily://in?config=xxxx")
            .to("myfamily://out")
            .create()
            .execute();
        // add asserts on the output if needed
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It executes the chain twice:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>With a standalone environment to simulate the Studio.</p>
</li>
<li>
<p>With a Beam (direct runner) environment to ensure the portability of your job.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
            </div>
          </div>
          <div class="col-sm-3 container article-side-panel">
            <nav class="article-anchors">
              <h1>On this page</h1>
            </nav>
          </div>
          <a href="#top" class="top">Scroll to top</a>
        </div>
        <script>(window.talend = (window.talend || {})).article = true;</script>
    </article>
              </div>
            </main>
      </main>
      <footer class="footer ">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links" style="">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright" style="">&copy; 2018 Talend Inc. All rights reserved.</div>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/rmannibucau/00206484a54ac569e091513e6d2a1c01/raw/46cd5d77ba1abe678f83d11490e12a327b62d7ee/anchorific.js"></script>
<script src="../../_/js/talend.js"></script>
  </body>
</html>
