
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Talend Component Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="date" content="2017-12-363 09:42:01" scheme="YYYY-MM-DD HH:mm:ss">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="css/bootstrap.css" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.0/css/font-awesome.min.css" integrity="sha256-MUe1D3T3ocGLZQ2h8wgpcIz5BoTu1OZo8q0BjK5u/o0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
    <!--[if lt IE 9]>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.ie.min.css" />
    <![endif]-->
    <link rel="stylesheet" href="css/documentation.css">
    <link rel="shortcut icon" href="images/favicon_0.ico" />
    <style>
    body{padding-top:50px}body>.navbar{-webkit-transition:background-color .3s ease-in;transition:background-color .3s ease-in}@media (min-width:768px){body>.navbar-transparent{background-color:transparent}body>.navbar-transparent .navbar-nav>.open>a{background-color:transparent!important}}#home{padding-top:0}#home .navbar-brand{padding:13.5px 15px 12.5px}#home .navbar-brand>img{display:inline;margin:0 10px;height:100%}#banner{min-height:300px;border-bottom:none}.table-of-contents{margin-top:1em}.page-header h1{font-size:4em}.bs-docs-section{margin-top:6em}.bs-docs-section h1{padding-top:100px}.bs-component{position:relative}.bs-component .modal{position:relative;top:auto;right:auto;left:auto;bottom:auto;z-index:1;display:block}.bs-component .modal-dialog{width:90%}.bs-component .popover{position:relative;display:inline-block;width:220px;margin:20px}#source-button{position:absolute;top:0;right:0;z-index:100;font-weight:700}.progress{margin-bottom:10px}footer{margin:5em 0}footer li{float:left;margin-right:1.5em;margin-bottom:1.5em}footer p{clear:left;margin-bottom:0}.splash{padding:9em 0 2em;background-color:#141d27;background-image:url(../img/bg.jpg);background-size:cover;background-attachment:fixed;color:#fff;text-align:center}.splash .logo{width:160px}.splash h1{font-size:3em}.splash #social{margin:2em 0}.splash .alert{margin:2em 0}.section-tout{padding:4em 0 3em;border-bottom:1px solid rgba(0,0,0,.05);background-color:#eaf1f1}.section-tout .fa{margin-right:.5em}.section-tout p{margin-bottom:3em}.section-preview{padding:4em 0 4em}.section-preview .preview{margin-bottom:4em;background-color:#eaf1f1}.section-preview .preview .image{position:relative}.section-preview .preview .image:before{box-shadow:inset 0 0 0 1px rgba(0,0,0,.1);position:absolute;top:0;left:0;width:100%;height:100%;content:"";pointer-events:none}.section-preview .preview .options{padding:1em 2em 2em;border:1px solid rgba(0,0,0,.05);border-top:none;text-align:center}.section-preview .preview .options p{margin-bottom:2em}.section-preview .dropdown-menu{text-align:left}.section-preview .lead{margin-bottom:2em}@media (max-width:767px){.section-preview .image img{width:100%}}.sponsor #carbonads{max-width:240px;margin:0 auto}.sponsor .carbon-text{display:block;margin-top:1em;font-size:12px}.sponsor .carbon-poweredby{float:right;margin-top:1em;font-size:10px}@media (max-width:767px){.splash{padding-top:4em}.splash .logo{width:100px}.splash h1{font-size:2em}#banner{margin-bottom:2em;text-align:center}}
    </style>
  </head>
  <body>
    <a class="github-fork-ribbon" target="_blank"
        href="https://github.com/talend/component-runtime" data-ribbon="Fork me on GitHub"
        title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="col-sm-offset-1 col-sm-10">

	
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/component-runtime/index.html" class="navbar-brand">Component Kit</a>
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="navbar-main">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="entries">Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu" aria-labelledby="entries">
            <li><a href="/component-runtime/index.html">Home</a></li>
            <li><a href="documentation-overview.html">Overview</a></li>
            <li><a href="getting-started.html">Getting Started</a></li>
            <li><a href="documentation.html">Reference</a></li>
            <li><a href="best-practices.html">Best Practices</a></li>
            <li><a href="documentation-testing.html">Testing</a></li>
            <li><a href="documentation-rest.html">REST API</a></li>
            <li><a href="wrapping-a-beam-io.html">How to wrap a Beam I/O</a></li>
            <li><a href="studio.html">Studio Integration</a></li>
            <li><a href="changelog.html">Changelog</a></li>
            <li><a href="contributors.html">Wall of Fame</a></li>
            <li><a href="apidocs.html">API Documentation</a></li>
            <li><a href="appendix.html">Appendix</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="versions">Versions <span class="caret"></span></a>
          <ul class="dropdown-menu" aria-labelledby="versions">
            <li><a href="/component-runtime/index.html">Current</a></li>
            <li><a href="/component-runtime/latest/index.html">Latest</a></li>
            
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>


    <div class="container section-padded">
        <div class="row title">
            <div class='page-header'>
              <h2>Talend Component Design Choices</h2>
            </div>
        </div>
        <div class="row">
            
            <div class="col-md-12">
                <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_component_api">1. Component API</a>
<ul class="sectlevel2">
<li><a href="#_evolution">1.1. Evolution</a></li>
<li><a href="#_static">1.2. Static</a></li>
<li><a href="#_flexible_data_modeling">1.3. Flexible data modeling</a></li>
<li><a href="#_generic_and_specific">1.4. Generic and specific</a></li>
</ul>
</li>
<li><a href="#_isolated">2. Isolated</a></li>
<li><a href="#_rest">3. REST</a>
<ul class="sectlevel2">
<li><a href="#_consumable_model">3.1. Consumable model</a></li>
<li><a href="#_execution_with_streaming">3.2. Execution with streaming</a></li>
</ul>
</li>
<li><a href="#_fixed_set_of_icons">4. Fixed set of icons</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_component_api">1. Component API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The component API has multiple strong choices:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it is declarative (through annotations) to ensure it is</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>evolutive (it can get new fancy featrues without breaking old code)</p>
</li>
<li>
<p>static as much as possible</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_evolution">1.1. Evolution</h3>
<div class="paragraph">
<p>Being fully declarative, any new API can be added iteratively without requiring
any changes to existing components.</p>
</div>
<div class="paragraph">
<p>Example (projection on beam potential evolution):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@ElementListener</span>
<span style="color:#088;font-weight:bold">public</span> MyOutput onElement(MyInput data) {
    <span style="color:#080;font-weight:bold">return</span> ...;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>wouldn&#8217;t be affected by the addition of the new Timer API
which can be used like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@ElementListener</span>
<span style="color:#088;font-weight:bold">public</span> MyOutput onElement(MyInput data,
                          <span style="color:#007">@Timer</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-timer</span><span style="color:#710">&quot;</span></span>) <span style="color:#0a8;font-weight:bold">Timer</span> timer) {
    <span style="color:#080;font-weight:bold">return</span> ...;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_static">1.2. Static</h3>
<div class="sect3">
<h4 id="_ui_friendly">1.2.1. UI friendly</h4>
<div class="paragraph">
<p>Intent of the framework is to be able to fit java UI as well as web UI.
It must be understood as colocalized and remote UI. The direct impact
of that choice is to try to move as much as possible the logic to the
UI side for UI related actions. Typically we want to validate a pattern,
a size, &#8230;&#8203; on the client side and not on the server side. Being static encourages this practise.</p>
</div>
</div>
<div class="sect3">
<h4 id="_auditable_and_with_clear_expectations">1.2.2. Auditable and with clear expectations</h4>
<div class="paragraph">
<p>The other goal to be really static in its definition is to ensure the model will not be mutated at runtime
and all the auditing and modelling can be done before, in the design phase.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dev_friendly">1.2.3. Dev friendly</h4>
<div class="paragraph">
<p>Being static also ensures the development can be validated as much as possible through build tools.
This doesn&#8217;t replace the requirement to test the components but helps the developer to maintain its components
with automated tools.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flexible_data_modeling">1.3. Flexible data modeling</h3>

</div>
<div class="sect2">
<h3 id="_generic_and_specific">1.4. Generic and specific</h3>
<div class="paragraph">
<p>The processor API supports <code>ObjectMap</code> as well as any custom model. Intent is to support generic component
development which need to access configured "object paths" and specific components which rely on a well defined
path from the input.</p>
</div>
<div class="paragraph">
<p>A generic component would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@ElementListener</span>
<span style="color:#088;font-weight:bold">public</span> MyOutput onElement(ObjectMap input) {
    <span style="color:#080;font-weight:bold">return</span> ...;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A specific component would look like (with <code>MyInput</code> a POJO):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@ElementListener</span>
<span style="color:#088;font-weight:bold">public</span> MyOutput onElement(MyInput input) {
    <span style="color:#080;font-weight:bold">return</span> ...;
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_no_runtime_assumption">1.4.1. No runtime assumption</h4>
<div class="paragraph">
<p>By design the framework must run in DI (plain standalone java program) but also in Beam pipelines. It is also
out of scope of the framework to handle the way the runtime serializes - if needed - the data. For that reason
it is primordial to not import serialization constraint in the stack. This is why <code>ObjectMap</code> is not an <code>IndexedRecord</code>
from avro for instance. Any serialization concern should either be hidden in the framework runtime (= outside component developer scope)
or in the runtime integration with the framework (beam integration for instance).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_isolated">2. Isolated</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The components must be able to execute even if they have conflicting libraries. For that purpose
it requires to isolate their classloaders. For that purpose a component will define
its dependencies based on a maven format and will always be bound to its own classloader.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest">3. REST</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_consumable_model">3.1. Consumable model</h3>
<div class="paragraph">
<p>The definition payload is as flat as possible and <em>strongly</em> typed to ensure it can be manipulated by consumers.
This way the consumers can add/remove fields with just some mapping rules and don&#8217;t require any abstract tree handling.</p>
</div>
<div class="paragraph">
<p>The execution (runtime) configuration is the concatenation of a few framework metadata (only the version actually) and
a key/value model of the instance of the configuration based on the definition properties paths for the keys. This enables
the consumers to maintain and work with the keys/values up to their need.</p>
</div>
<div class="paragraph">
<p>The framework not being responsible for any persistence it is crucial to ensure consumers can handle it from end to end
which includes the ability to search for values (update a machine, update a port etc&#8230;&#8203;) and keys (new encryption rule on key <code>certificate</code> for instance).</p>
</div>
<div class="paragraph">
<p>Talend component is a metamodel provider (to build forms) and runtime <strong>execution</strong> platform (take a configuration instance and use it volatively
to execute a component logic). This implies it can&#8217;t own the data more than defining the contract it has for these two endpoints and must
let the consumers handle the data lifecycle (creation, encryption, deletion, &#8230;&#8203;.).</p>
</div>
</div>
<div class="sect2">
<h3 id="_execution_with_streaming">3.2. Execution with streaming</h3>
<div class="paragraph">
<p>A new mime type called <code>talend/stream</code> is introduced to define a streaming format.</p>
</div>
<div class="paragraph">
<p>It basically matches a JSON object per line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{<span style="color:#606"><span style="color:#404">&quot;</span><span>key1</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value1</span><span style="color:#710">&quot;</span></span>}
{<span style="color:#606"><span style="color:#404">&quot;</span><span>key2</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value2</span><span style="color:#710">&quot;</span></span>}
{<span style="color:#606"><span style="color:#404">&quot;</span><span>key1</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value11</span><span style="color:#710">&quot;</span></span>}
{<span style="color:#606"><span style="color:#404">&quot;</span><span>key1</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value111</span><span style="color:#710">&quot;</span></span>}
{<span style="color:#606"><span style="color:#404">&quot;</span><span>key2</span><span style="color:#404">&quot;</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value2</span><span style="color:#710">&quot;</span></span>}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fixed_set_of_icons">4. Fixed set of icons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Icons (<code>@Icon</code>) are based on a fixed set. Even if a custom icon is usable this is
without any guarantee. This comes from the fact components can be used in any environment
and require a kind of uniform look which can&#8217;t be guaranteed outside the UI itself so
defining only keys is the best way to communicate this information.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
when you exactly know how you will deploy your component (ie in the Studio) then you
can use `@Icon(value = CUSTOM, custom = "&#8230;&#8203;") to use a custom icon file.
</td>
</tr>
</table>
</div>
</div>
</div>
            </div>
            
        </div>
    </div>


    <footer>
        <div class="row">
          <div class="col-lg-12">

            <ul class="list-unstyled">
              <li class="pull-right"><a href="#top">Back to top</a></li>
            </ul>
          </div>
        </div>
    </footer>
    </div>

    <script src="js/jquery-1.10.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap.js"></script>
  </body>
</html>

